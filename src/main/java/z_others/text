1、设计一个短链接

2、用户指定一个短链接，不指定的话系统自动分配

3、每一个短链接默认过期时间5年，用户可以指定(<=5)

4、用户使用量每月会创建5亿条短链接，读写比100:1

5、高并发，高可用




-----解决方案

1、hash算法做长短链接的映射

2、冲突处理，先从缓存中判断有没有重复，再从数据库中查找是否重复，如果有重复的系统再自动生成一个。

3、数据库MySQL

用户表: uuid、userID、username、password

映射表：uuid、shortURL(唯一)、longUrl、timetolive

选择使用雪花算法生成UUID,考虑到分库分表，MySQL采用主从设计

异地多活：多台数据库互为主备关系，增加一层LB

增加数据库读锁

4、缓存 Redis
把当天用户所使用的到的短链接，存到Redis中， key：短链接 value：长链接

写缓存会放在业务冷淡（00:00-06:00），新增的短链接写入到数据库保存




